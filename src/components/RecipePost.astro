---
const { title, category, frontmatter, id } = Astro.props;
// const { storage, yield: yieldInfo, time } = frontmatter;

// Compute a stable View Transitions name from the content id so
// the list link text can morph into the recipe title
const idNoExt = (id as string).replace(/\.(md|mdx)$/i, "");
const safeId = idNoExt.replace(/[^a-z0-9_-]/gi, "-").toLowerCase();
const vtName = `recipe-title-${safeId}`;
---

<article class="flow">
  <header>
    <p class="eyebrow">{category}</p>
    <h1 style={`view-transition-name: ${vtName}`}>
      {title}
    </h1>
  </header>
  <slot />
</article>

<style>
  @layer components {
    article {
      margin: auto;
      padding: var(--space-lg) var(--space-md) var(--space-xxxl);
      max-width: 60ch;
      background: linear-gradient(
        0deg,
        hsl(174.29deg 42.86% 97%),
        var(--gray-100)
      );
      padding-block-end: 7rem;
    }

    h1 {
      width: fit-content;
    }

    header {
      display: grid;
      gap: var(--space-xs);
      margin-bottom: var(--space-lg);
      padding-block-end: var(--space-sm);
      border-bottom: 1px solid var(--gray-300);
    }

    p {
      margin: 0;
    }

    .eyebrow {
      letter-spacing: 0.03rem;
      font-size: var(--size-step--1);
      font-weight: 600;
      color: var(--gray-500);
      text-transform: uppercase;
    }
  }
</style>

<script>
  import "../js/recipe";
</script>
